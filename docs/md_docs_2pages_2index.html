<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-NN5JX4B');</script>
  <!-- End Google Tag Manager -->
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=11" />
  <meta name="generator" content="Doxygen 1.14.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SkyWay Unity SDK: SkyWay Unity SDK</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeInteractiveToc.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
  </script>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NN5JX4B" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <!-- https://tholman.com/github-corners/ -->
  <a href="https://github.com/skyway/unity-sdk-beta" class="github-corner" title="View source on GitHub" target="_blank"
    rel="noopener noreferrer">
    <svg viewBox="0 0 250 250" width="40" height="40"
      style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path
        d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
        fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
      <path
        d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
        fill="currentColor" class="octo-body"></path>
    </svg></a>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr id="projectrow">
              <td id="projectlogo"><img alt="Logo" src="logo-icon.svg"  /></td>
              <td id="projectalign">
                <div id="projectname">SkyWay Unity SDK
                </div>
                <div id="projectbrief">公式APIリファレンス</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part -->
<!-- 構築: Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','検索',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md_docs_2pages_2index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">読み取り中…</div>
<div class="SRStatus" id="Searching">検索中…</div>
<div class="SRStatus" id="NoMatches">一致する文字列を見つけられません</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">SkyWay Unity SDK </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a></p>
<p>SkyWay Unity SDK(以下、Unity SDK)は Unity デバイス用のアプリケーションから SkyWay を利用するための SDK です。 <br  />
 Unity のネイティブなアプリケーションに SkyWay を組み込むことで、デバイス同士やブラウザとのリアルタイム通信を実現できます。</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md1"></a>
インストール方法</h1>
<p>プラットフォームによって異なります。 各クイックスタートをご参照ください。</p>
<ul>
<li><a href="https://skyway.ntt.com/ja/docs/user-guide/unity-sdk/quickstart-windows/">クイックスタート(Windows)</a></li>
<li><a href="https://skyway.ntt.com/ja/docs/user-guide/unity-sdk/quickstart-android/">クイックスタート(Android)</a></li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md2"></a>
用語の解説</h1>
<p>SkyWayを利用する際に登場する用語について解説します。</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md3"></a>
Room</h2>
<p>Roomは通話を行うグループの単位であり、共通の Room に参加したユーザー同士で通話を行うことができます。 <br  />
 RoomにはP2P Room と SFU Room の 2 種類の Room があり、どちらかを選択して利用できます。 <br  />
 P2P Room は少人数(4人程度)向けで、SFU Room は多人数向けです。 <br  />
</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md4"></a>
Member</h2>
<p>Room に参加しているユーザーのことを Member と呼びます。 <br  />
</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md5"></a>
Stream</h2>
<p>Room 上で送受信できるメディアのことを Stream といいます。 <br  />
 音声、映像、データの3種類の Stream を利用できます。 <br  />
</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md6"></a>
Publish</h2>
<p>Member が Stream を Room に公開することを Publish といいます。 <br  />
 Stream を Publish すると Room 上に Stream に対応する Publication というリソースが作成されます。 <br  />
</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md7"></a>
Subscribe</h2>
<p>Member が Room 上の Publication を受信することを Subscribe といいます。 <br  />
 Subscribe をすると Room 上に Subscription というリソースが作成されます。 <br  />
 Publication を Subscribe した Member は Subscription を通じて Stream にアクセスし映像や音声を受信できます。</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8"></a>
基本機能の解説</h1>
<p>Unity SDKの基本的な機能について解説します。</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md9"></a>
SWContext</h2>
<p>SkyWay利用の開始や終了を行うためのクラスです。 ログレベルなど、アプリケーション全体に影響するオプションの設定も担っています。</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md10"></a>
SkyWay利用の開始</h3>
<div class="fragment"><div class="line">await SWContext.Setup(<span class="keyword">this</span>, authToken);</div>
</div><!-- fragment --><p>事前に SkyWay Auth Token の取得が必要になります。</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md11"></a>
Auth Tokenの更新</h3>
<p>Auth Tokenには期限を設定する必要があり、期限が切れるとSkyWayを利用できなくなります。 <br  />
 そのため、Auth Tokenが失効する前に更新してください。</p>
<div class="fragment"><div class="line"><span class="comment">// Auth Tokenの更新が必要なタイミングを検知</span></div>
<div class="line">SWContext.onTokenRefreshingNeededHandler = () =&gt; {</div>
<div class="line">    <span class="comment">// 新しいAuth Tokenに更新</span></div>
<div class="line">    SWContext.UpdateAuthToken(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">};</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md12"></a>
SkyWay利用の終了</h3>
<div class="fragment"><div class="line">SWContext.Dispose();</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md13"></a>
Room</h2>
<p>通話グループである Room の作成/取得および操作を行うことができます。 Room には P2PRoom と SFURoom の 2 種類が存在し、API は基本的に共通しています。</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md14"></a>
Roomの作成・取得</h3>
<p>Roomの作成時にnameを指定することができます。 他のクライアントからは同じnameを指定してRoomを取得することができます。</p>
<div class="fragment"><div class="line"><span class="comment">// Roomの作成</span></div>
<div class="line">var room = await SWP2PRoom.Create(roomName);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Roomの取得</span></div>
<div class="line">var room = await SWP2PRoom.Find(roomName <span class="comment">/* または id = roomId */</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Roomの取得を試み、存在しなければ作成</span></div>
<div class="line">var room = await SWP2PRoom.FindOrCreate(roomName);</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md15"></a>
Metadata の更新</h3>
<p>Room の Metadata を更新することができます</p>
<div class="fragment"><div class="line"><span class="comment">// metadataの取得</span></div>
<div class="line">var metadata = room.Metadata;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// metadataの更新</span></div>
<div class="line">room.UpdateMetadata(<span class="stringliteral">&quot;metadata&quot;</span>);</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
Member の Room への参加</h3>
<p>Room に参加すると LocalRoomMember インスタンスを取得できます。 <br  />
 <span class="tt">SWRoomMemberOptions</span>には<span class="tt">name</span>と<span class="tt">metadata</span>の設定が可能です。 <br  />
</p>
<div class="fragment"><div class="line">var localRoomMember = room.Join(<span class="keyword">new</span> SWRoomMemberOptions());</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md17"></a>
LocalRoomMember</h2>
<p>Memberの操作を行うことができます。 具体的には、Metadataの更新、Stream の Publish/Subscribe を行うことが出来ます。</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
Metadata の更新</h3>
<p>Member の Metadata を更新することができます</p>
<div class="fragment"><div class="line"><span class="comment">// metadataの取得</span></div>
<div class="line">var metadata = member.Metadata;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// metadataの更新</span></div>
<div class="line">member.UpdateMetadata(<span class="stringliteral">&quot;metadata&quot;</span>);</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md19"></a>
Stream の Publish</h3>
<p>Room に Stream を Publish することができます。 <br  />
 また、Room 上の Stream の Publication を Unpublish することができます。 <br  />
 このとき、対象のPublicationに対する Subscription が自動的に Unsubscribe されます。</p>
<div class="fragment"><div class="line"><span class="comment">// Publish</span></div>
<div class="line">var publication = member.Publish(stream);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Unpublish</span></div>
<div class="line">member.Unpublish(publication);</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
Publication の Subscribe</h3>
<p>Room 上の Publication を Subscribe することができます。</p>
<div class="fragment"><div class="line"><span class="comment">// Subscribe</span></div>
<div class="line">var subscription = member.Subscribe(publication);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Unsubscribe</span></div>
<div class="line">member.Unsubscribe(subscription);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md21"></a>
Source/Stream</h2>
<p>Sourceは、SDKから各種メディアへアクセスするAPIを提供します。 また、Publish可能なStream を作成することが出来ます。</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md22"></a>
SourceからStreamの作成</h3>
<div class="fragment"><div class="line"><span class="comment">// マイク音声のソース</span></div>
<div class="line">var audioSource = <span class="keyword">new</span> SWAudioSource();</div>
<div class="line">var stream = audioSource.CreateStream();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// カメラテクスチャのソース(Androidのみ対応)</span></div>
<div class="line">var videoSource = <span class="keyword">new</span> SWVideoSource(sendingTexture);</div>
<div class="line">var stream = videoSource.CreateStream();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// データソース</span></div>
<div class="line">var dataSource = <span class="keyword">new</span> SWDataSource();</div>
<div class="line">var stream = dataSource.CreateStream();</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md23"></a>
AudioStreamの再生</h3>
<p>受信した音声を再生することができます。</p>
<div class="fragment"><div class="line">stream.SetAudioSource(audioSource);</div>
<div class="line">audioSource.Play();</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md24"></a>
VideoStreamの再生</h3>
<p>受信した映像を再生することができます。</p>
<div class="fragment"><div class="line">stream.onTextureHandler = (texture) =&gt; {</div>
<div class="line">    <span class="comment">// 受信した映像テクスチャをRaw Imageに描画します</span></div>
<div class="line">    renderingImage.texture = texture;</div>
<div class="line">};</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md25"></a>
DataStreamによるデータの送受信</h3>
<p>任意のデータの送信ができます。（SFU Room は非対応です）</p>
<div class="fragment"><div class="line"><span class="comment">// データの送信</span></div>
<div class="line">stream.Write(<span class="stringliteral">&quot;hello&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment">// データの受信</span></div>
<div class="line">stream.OnDataHandler = (data) =&gt; {</div>
<div class="line">    Debug.Log(<span class="stringliteral">&quot;data: &quot;</span> + data);</div>
<div class="line">};</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md26"></a>
RoomPublication</h2>
<p>Publication の情報の参照と操作ができます。</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md27"></a>
Metadata の取得・更新</h3>
<p>PublicationのMetadata を取得・更新することができます。</p>
<div class="fragment"><div class="line"><span class="comment">// metadataの取得</span></div>
<div class="line">var metadata = publication.Metadata</div>
<div class="line"> </div>
<div class="line"><span class="comment">// metadataの更新</span></div>
<div class="line">publication.UpdateMetadata(<span class="stringliteral">&quot;metadata&quot;</span>)</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md28"></a>
ミュート</h3>
<p>Publication に紐ついた映像や音声などの配信を一時停止（ミュート）することができます</p>
<div class="fragment"><div class="line"><span class="comment">// ミュート</span></div>
<div class="line">publication.Disable()</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ミュートの解除</span></div>
<div class="line">publication.Enable()</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md29"></a>
RoomSubscription</h2>
<p>Subscription の情報の参照と Subscription の操作ができます</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md30"></a>
Stream の参照</h3>
<p>Subscription から映像/音声/データの Stream を参照できます。</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (stream is SWRemoteVideoStream videoStream) {</div>
<div class="line">    videoStream.onTextureHandler = (texture) =&gt; {</div>
<div class="line">        renderingImage.texture = texture;</div>
<div class="line">    };</div>
<div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stream is SWRemoteAudioStream audioStream) {</div>
<div class="line">    audioStream.SetAudioSource(audioSource);</div>
<div class="line">    audioSource.Play();</div>
<div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stream is SWRemoteDataStream dataStream) {</div>
<div class="line">    dataStream.OnDataHandler = (data) =&gt; {</div>
<div class="line">        Debug.Log(<span class="stringliteral">&quot;data: &quot;</span> + data);</div>
<div class="line">    };</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      ©NTT DOCOMO BUSINESS, Inc. All Rights Reserved.
      Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg"
          width="104" height="31" alt="doxygen" /></a></li>
  </ul>
</div>
</body>
</html>
